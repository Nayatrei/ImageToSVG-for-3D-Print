<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tinkercad SVG Creator - 3D Print Ready</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="imagetracer_v1.2.6.js"></script>
  <script src="converter.js"></script>
</head>
<body>
  <h1 style="position:relative;">Tinkercad SVG Creator - 3D Print Ready
    <span class="donate-top-right">
      <a href="https://buymeacoffee.com/genesisframeworks" target="_blank" id="donate-link">☕ Buy me a coffee</a>
    </span>
  </h1>

  <div class="content-wrapper">
    <div class="quick-start-column">
      <h3>🚀 Quick Start for 3D Printing & Tinkercad</h3>
      <div class="guide-steps">
        <div class="step">
          <span class="step-number">1</span>
          <div class="step-content">
            <strong>Import your image</strong><br>
            <small>Tip: Simple, high-contrast graphics work best (for example, a Batman or Superman logo).</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">2</span>
          <div class="step-content">
            <strong>Select the “📐 3D Print (Tinkercad Ready)” preset</strong><br>
            <small>This preset is tuned for clean shapes that extrude well in Tinkercad.</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">3</span>
          <div class="step-content">
            <strong>Adjust "Simplification Level"</strong><br>
            <small>Higher = cleaner shapes for 3D printing</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">4</span>
          <div class="step-content">
            <strong>Download the optimized SVG layers</strong><br>
            <small>Downloads multiple files: one per layer + a background silhouette.</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">5</span>
          <div class="step-content">
            <strong>Import to Tinkercad</strong><br>
            <small>In Tinkercad, click Import and choose the SVG. In the import options, set the Style to Silhouette (solid shape). Resize if needed and extrude upward to give it thickness.</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">6</span>
          <div class="step-content">
            <strong>Add More Layers</strong><br>
            <small>Import additional SVGs, group & adjust heights, align for multi-color</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">7</span>
          <div class="step-content">
            <strong>Export the combined model as an OBJ file</strong><br>
            <small>Select all shapes, export OBJ to preserve colors, download file</small>
          </div>
        </div>
        <div class="step">
          <span class="step-number">8</span>
          <div class="step-content">
            <strong>Import to Slicer & Assign Colors</strong><br>
            <small>Open slicer (e.g., Bambu Studio), import OBJ, paint/refine colors for printing</small>
          </div>
        </div>
      </div>
    </div>

    <div class="main-content-column">
      <div class="image-section content-box" style="margin-bottom: 20px;">
        <h2>Original Image</h2>
        <div class="image-container">
          <img id="source-image" alt="Original Image" style="display:none;">
        </div>

        <button id="import-btn">Import Image</button>
        <input type="file" id="file-input" accept="image/*,image/svg+xml" style="display:none;">

        <!-- Online image loader -->
        <div class="online-loader" style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
          <input type="text" id="url-input" placeholder="Paste image URL here (try a Batman logo!)" style="flex:1; padding:8px; border:1px solid #ccc; border-radius:4px; min-width:200px;">
          <button id="load-url-btn">Load URL</button>
        </div>

        <div id="status-container">
          <div id="status-text">Ready for 3D printing magic! ✨</div>
        </div>

        <div id="original-resolution" class="resolution-info" style="margin-top:8px; font-size:14px; color:#555;"></div>
      </div>

      <div class="controls-section content-box" style="margin-bottom: 20px;">
        <h2>3D Print Optimization</h2>

        <table class="options-table">
          <tr>
            <td><label for="preset">Conversion Style
              <span class="tooltip" title="Choose your conversion approach:

📐 3D Print (Tinkercad Ready): Best for clean 3D printing
🌊 Smooth Curves: Artistic, flowing shapes
⚡ Sharp Details: Preserves crisp edges
🧩 Standard (ImageTracer Default): Balanced baseline">?</span>
            </label></td>
            <td>
              <select id="preset">
                <option value="3dprint" selected>📐 3D Print (Tinkercad Ready)</option>
                <option value="curvy">🌊 Smooth Curves</option>
                <option value="sharp">⚡ Sharp Details</option>
                <option value="default">⚙️ Standard (ImageTracer Default)</option>
              </select>
            </td>
          </tr>
          <tr>
            <td><label for="path-simplification">Path Simplification
              <span class="tooltip" title="Removes tiny fragments and simplifies coordinates for Tinkercad. Lower keeps detail, higher removes noise.">?</span>
            </label></td>
            <td>
              <input type="range" id="path-simplification" min="0" max="100" value="40" step="1">
              <span id="path-simplification-value" class="slider-value">40%</span>
              <small style="margin-left:8px;color:#007bff;">💡 Higher = fewer tiny pieces</small>
            </td>
          </tr>

          <tr>
            <td><label for="corner-sharpness">Corner Sharpness
              <span class="tooltip" title="Controls how sharply corners are preserved. Higher = sharper corners.">?</span>
            </label></td>
            <td>
              <input type="range" id="corner-sharpness" min="0" max="100" value="60" step="1">
              <span id="corner-sharpness-value" class="slider-value">60%</span>
              <small style="margin-left:8px;color:#007bff;">💡 Higher = crisper corners</small>
            </td>
          </tr>

          <tr>
            <td><label for="curve-straightness">Curve Straightness
              <span class="tooltip" title="Controls how straight long curves become. Higher = straighter lines.">?</span>
            </label></td>
            <td>
              <input type="range" id="curve-straightness" min="0" max="100" value="40" step="1">
              <span id="curve-straightness-value" class="slider-value">40%</span>
              <small style="margin-left:8px;color:#007bff;">💡 Higher = straighter outlines</small>
            </td>
          </tr>

          <tr>
            <td><label for="color-precision">Color Precision
              <span class="tooltip" title="Uses ImageTracer quantization options (sampling, cycles, ratio) to separate layers deterministically. Higher = more precise color separation.">?</span>
            </label></td>
            <td>
              <input type="range" id="color-precision" min="0" max="100" value="50" step="1">
              <span id="color-precision-value" class="slider-value">50%</span>
              <small id="color-feedback" style="margin-left:8px;color:#28a745;">🎯 Balanced for most images</small>
            </td>
          </tr>


          

          

          <tr>
            <td><label for="remove-bg">Remove Background
              <span class="tooltip" title="Automatically detect and remove the background color. Perfect for logos on white/colored backgrounds.">?</span>
            </label></td>
            <td><input type="checkbox" id="remove-bg"></td>
          </tr>

          <tr id="palette-row" style="display:none;">
            <td><label>Layer Selection
              <span class="tooltip" title="Choose which colors/layers to include in your final SVG. Uncheck layers you don't want to 3D print.">?</span>
            </label></td>
            <td id="palette-container"></td>
          </tr>

          <!-- Advanced controls (hidden by default) -->
          
        </table>
      </div>

      <div class="generation-section content-box">
        <button id="generate-btn" class="generate-button" disabled>
          ⚡ Generate 3D-Ready Preview
        </button>
      </div>

      <div class="preview-grid">
        <div class="preview-column">
          <h2>📐 3D Print Preview</h2>
          <div class="image-container preview-container">
            <object id="svg-preview" type="image/svg+xml"></object>
          </div>
          <div id="quality-indicator" class="quality-indicator"></div>
        </div>

        <div class="preview-column">
          <h2>🎯 Selected Layers Only</h2>
          <div class="image-container preview-container">
            <object id="svg-preview-filtered" type="image/svg+xml"></object>
          </div>
        </div>
      </div>

      <div id="scaled-resolution" class="resolution-info" style="margin-top:8px; font-size:14px; color:#555; text-align:center;"></div>

      <div class="download-section">
        <!-- Main 3D print downloads -->
        <div class="download-row primary-downloads">
          <button id="download-tinkercad-btn" disabled class="tinkercad-btn">
            🏆 Download Layers for Tinkercad (multiple files)
          </button>
          <!-- Download All Layers button removed -->
        </div>

        <!-- Secondary downloads -->
        <div class="download-row secondary-downloads">
          <button id="download-silhouette-btn" disabled>🎭 Silhouette (Background)</button>
          <!-- Complete SVG button removed -->
        </div>

        <!-- Dynamic color layer buttons -->
        <div id="color-buttons-row" class="color-buttons-row"></div>
      </div>

      <!-- Layer Merging Section (hidden by default, appears after generation) -->
      <div id="layer-merging-section" class="content-box" style="display:none; margin-top:20px;">
        <h2>🧩 Layer Merging</h2>
        <p style="font-size:14px; color:#555; margin-bottom:12px;">
          Combine similar color layers for simpler 3D printing. Define rules to move one layer into another, then download the merged SVGs.
        </p>
        <div id="merge-rules-container" style="display:flex; flex-direction:column; gap:10px; margin-bottom:12px;"></div>
        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <button id="add-merge-rule-btn" disabled>Add Merge Rule</button>
          <button id="combine-and-download-btn" disabled class="tinkercad-btn">
            ♻️ Combine Layers & Download
          </button>
        </div>
      </div>
    </div>
  </div>


</body>
</html>